<div class="mx-5">

<%= form_with model: @post, url: path, multiple: true, method: method do |post| %>
	<%= fields_for :car, @post.car do |car| %>
		<div class="input-group mb-3">
			<div class="input-group-prepend">    
				<%= car.label :price, class: "input-group-text"  %>
			</div>
			<%= car.text_field :price, class: "form-control" %>
		</div>

		<div class="input-group mb-3">
			<div class="input-group-prepend">    
				<%= car.label "brand", class: "input-group-text rounded-right", style: "margin-right: 10px"%>
			</div>
				<%= select_tag("car[brand_id]", options_for_select(Brand.all.map { |brand| [brand.title, brand.id] }, { required: true, selected: (@post.car.brand.id if !@post.new_record?)}), class: "btn btn-secondary dropdown-toggle", style: "margin-right: 10px")%>
			<%= car.fields_for :brand, Brand.new do |brand| %>
				<%= brand.label "If you dont find brand of your car, type it here ->", style: "margin-right: 10px; padding-top: 7px" %>
				<%= brand.text_field :title, class: "form-control" %>
			<%end%>
		</div>

		<div class="input-group mb-3">
			<div class="input-group-prepend">    
				<%= car.label :drivetrain, class: "input-group-text rounded-right" , style: "margin-right: 10px" %>
			</div>
			<%= select_tag("car[drivetrain]", options_for_select(Car.drivetrains.map { |k,v| [k,k] }, { required: true, include_blank: false, selected:(@post.car.drivetrain if !@post.new_record?)}), class: "btn btn-secondary dropdown-toggle")%>
		</div>

		<div class="input-group mb-3">
			<div class="input-group-prepend">    
				<%= car.label :location, class: "input-group-text"  %>
			</div>
			<%= car.text_field :location, class: "form-control" %>
		</div>

		<div class="input-group mb-3">
				<div class="input-group-prepend">    
							<%= car.label :transmition, class: "input-group-text rounded-right" , style: "margin-right: 10px" %>
				</div>
				<%= select_tag("car[transmition]", options_for_select(Car.transmitions.map { |k,v| [v,k] }, { required: true, include_blank: false, selected:(@post.car.transmition if !@post.new_record?)}), class: "btn btn-secondary dropdown-toggle")%>
		</div>

		<div class="input-group mb-3">
				<div class="input-group-prepend">    
							<%= car.label :vin, class: "input-group-text"  %>
				</div>
				<%= car.text_field :vin, class: "form-control" %>
		</div>

		<div class="input-group mb-3">
				<div class="input-group-prepend">    
						<%= car.label :exterior_collor, class: "input-group-text"  %>
				</div>
				<%= car.text_field :exterior_collor, class: "form-control" %>
		</div>

		<div class="input-group mb-3">
				<div class="input-group-prepend">    
						<%= car.label :interior_collor, class: "input-group-text"  %>
				</div>
				<%= car.text_field :interior_collor, class: "form-control" %>
		</div>

		<div class="input-group mb-3">
				<div class="input-group-prepend">    
						<%= car.label :millage, class: "input-group-text"  %>
				</div>
				<%= car.text_field :millage, class: "form-control" %>
		</div>

		<div class="input-group mb-3">
				<div class="input-group-prepend">    
						<%= car.label :body_style, class: "input-group-text rounded-right" , style: "margin-right: 10px" %>
				</div>
					<%= select_tag("car[body_style]", options_for_select(Car.body_styles.map { |k,v| [v,k] }, { required: true, include_blank: false, selected: (@post.car.body_style if !@post.new_record?)}), class: "btn btn-secondary dropdown-toggle")%>
		</div>

		<div class="input-group mb-3">
				<div class="input-group-prepend">    
						<%= car.label :engine, class: "input-group-text"  %>
				</div>
				<%= car.text_field :engine, class: "form-control" %>
		</div>
        <%= car.file_field(:images, multiple: true) %>
	<% end %>

        <div class="input-group mb-3">
            <div class="input-group-prepend">    
                <%= post.label :small_description, class: "input-group-text"  %>
            </div>
            <%= post.text_field :small_description, class: "form-control" %>
        </div>
        <div class="input-group mb-3">
            <div class="input-group-prepend">    
                <%= post.label :big_description, class: "input-group-text"  %>
            </div>
            <%= post.text_area :big_description, class: "form-control" %>
        </div>

        <%@post.car.images.each_with_index do |image,index|%>
          <%if @post.car.images?%>
            <%=image_tag(image.index_thumb.url, alt: 'Image' , class:"mb-2" )%>
            <%=link_to("Delete", post_image_path(@post.car, index), :method => :delete, data: { confirm: "Are you sure you want to delete this image?" })%>
          <%end%>
        <%end%>

				<div class="input-group mb-3">
					<div class="input-group-prepend">    
							<%= post.label "Post state", class: "input-group-text rounded-right", style: "margin-right: 10px"  %>
					</div>
        <%= select_tag("post[status]", options_for_select(Post.statuses.map { |k,v| [k,k] }, { required: true, include_blank: false, selected: @post.status }), class: "btn btn-secondary dropdown-toggle")%>		
				</div>
				
        <div class="mt-3">
            <%= post.submit  t('.submit', action: @post.new_record? ? 'Создать'  : 'Изменить'), class:"btn btn-outline-secondary mb-2" %>
        </div>
    </div>
<% end %>